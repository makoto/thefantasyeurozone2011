$(document).ready ->
  data = [{"name":"Belgium","code":"BE","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-4.1,"yields":4.2,"debt":98.4,"unemployment":6.7,"gdp":467471523178.808,"isEuroZoneGrade":1,"isOriginalEuroZoneGrade":1,"deficitGrade":4,"yieldsGrade":3,"debtGrade":1,"unemploymentGrade":4,"gdpGrade":4},{"name":"Bulgaria","code":"BG","isEuroZone":"n","isOriginalEuroZone":"n","deficit":-3.1,"yields":5.26,"debt":15.2,"unemployment":11.9,"gdp":47714490182.803,"isEuroZoneGrade":1,"isOriginalEuroZoneGrade":1,"deficitGrade":4,"yieldsGrade":2,"debtGrade":5,"unemploymentGrade":2,"gdpGrade":2},{"name":"Czech Republic","code":"CZ","isEuroZone":"n","isOriginalEuroZone":"n","deficit":-4.8,"yields":3.14,"debt":40.1,"unemployment":6.6,"gdp":192151584569.267,"isEuroZoneGrade":1,"isOriginalEuroZoneGrade":1,"deficitGrade":3,"yieldsGrade":3,"debtGrade":4,"unemploymentGrade":4,"gdpGrade":2},{"name":"Denmark","code":"DK","isEuroZone":"n","isOriginalEuroZone":"n","deficit":-2.6,"yields":2.23,"debt":47.5,"unemployment":7.1,"gdp":310404822126.305,"isEuroZoneGrade":1,"isOriginalEuroZoneGrade":1,"deficitGrade":4,"yieldsGrade":4,"debtGrade":3,"unemploymentGrade":4,"gdpGrade":3},{"name":"Germany","code":"DE","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-4.3,"yields":2.0,"debt":81.1,"unemployment":5.8,"gdp":3309668874172.19,"isEuroZoneGrade":1,"isOriginalEuroZoneGrade":1,"deficitGrade":3,"yieldsGrade":5,"debtGrade":2,"unemploymentGrade":4,"gdpGrade":5},{"name":"Estonia","code":"EE","isEuroZone":"y","isOriginalEuroZone":"n","deficit":0.2,"yields":0.0,"debt":6.2,"unemployment":12.8,"gdp":18673908194.0836,"isEuroZoneGrade":1,"isOriginalEuroZoneGrade":1,"deficitGrade":5,"yieldsGrade":5,"debtGrade":5,"unemploymentGrade":2,"gdpGrade":1},{"name":"Ireland","code":"IE","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-31.3,"yields":8.1,"debt":104.6,"unemployment":14.2,"gdp":203892188349.669,"isEuroZoneGrade":2,"isOriginalEuroZoneGrade":2,"deficitGrade":1,"yieldsGrade":1,"debtGrade":1,"unemploymentGrade":1,"gdpGrade":3},{"name":"Greece","code":"GR","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-10.6,"yields":18.04,"debt":151.9,"unemployment":17.6,"gdp":304865067454.305,"isEuroZoneGrade":2,"isOriginalEuroZoneGrade":2,"deficitGrade":1,"yieldsGrade":1,"debtGrade":1,"unemploymentGrade":1,"gdpGrade":3},{"name":"Spain","code":"ES","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-9.3,"yields":5.26,"debt":65.2,"unemployment":22.6,"gdp":1407405298013.24,"isEuroZoneGrade":2,"isOriginalEuroZoneGrade":2,"deficitGrade":1,"yieldsGrade":2,"debtGrade":3,"unemploymentGrade":1,"gdpGrade":4},{"name":"France","code":"FR","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-7.1,"yields":2.99,"debt":86.1,"unemployment":9.9,"gdp":2560002000000.0,"isEuroZoneGrade":2,"isOriginalEuroZoneGrade":2,"deficitGrade":2,"yieldsGrade":3,"debtGrade":1,"unemploymentGrade":2,"gdpGrade":5},{"name":"Italy","code":"IT","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-4.6,"yields":5.97,"debt":121.4,"unemployment":8.3,"gdp":2051412153369.54,"isEuroZoneGrade":2,"isOriginalEuroZoneGrade":2,"deficitGrade":3,"yieldsGrade":2,"debtGrade":1,"unemploymentGrade":3,"gdpGrade":5},{"name":"Cyprus","code":"CY","isEuroZone":"y","isOriginalEuroZone":"n","deficit":-5.3,"yields":7.0,"debt":66.8,"unemployment":7.8,"gdp":25039094267.1395,"isEuroZoneGrade":2,"isOriginalEuroZoneGrade":2,"deficitGrade":3,"yieldsGrade":1,"debtGrade":2,"unemploymentGrade":3,"gdpGrade":1},{"name":"Latvia","code":"LV","isEuroZone":"n","isOriginalEuroZone":"n","deficit":-8.3,"yields":5.62,"debt":45.2,"unemployment":16.1,"gdp":24009680459.9868,"isEuroZoneGrade":3,"isOriginalEuroZoneGrade":3,"deficitGrade":1,"yieldsGrade":2,"debtGrade":3,"unemploymentGrade":1,"gdpGrade":1},{"name":"Lithuania","code":"LT","isEuroZone":"n","isOriginalEuroZone":"n","deficit":-7.0,"yields":5.05,"debt":37.9,"unemployment":15.5,"gdp":36306384146.1075,"isEuroZoneGrade":3,"isOriginalEuroZoneGrade":3,"deficitGrade":2,"yieldsGrade":3,"debtGrade":4,"unemploymentGrade":1,"gdpGrade":1},{"name":"Luxembourg","code":"LU","isEuroZone":"y","isOriginalEuroZone":"n","deficit":-1.1,"yields":2.37,"debt":18.7,"unemployment":4.8,"gdp":55095629139.0728,"isEuroZoneGrade":3,"isOriginalEuroZoneGrade":3,"deficitGrade":5,"yieldsGrade":4,"debtGrade":5,"unemploymentGrade":5,"gdpGrade":2},{"name":"Hungary","code":"HU","isEuroZone":"n","isOriginalEuroZone":"n","deficit":-4.2,"yields":7.88,"debt":76.8,"unemployment":9.9,"gdp":130418835184.103,"isEuroZoneGrade":3,"isOriginalEuroZoneGrade":3,"deficitGrade":4,"yieldsGrade":1,"debtGrade":2,"unemploymentGrade":2,"gdpGrade":2},{"name":"Malta","code":"MT","isEuroZone":"y","isOriginalEuroZone":"n","deficit":-3.6,"yields":4.26,"debt":71.6,"unemployment":6.6,"gdp":7987432157.06315,"isEuroZoneGrade":3,"isOriginalEuroZoneGrade":3,"deficitGrade":4,"yieldsGrade":3,"debtGrade":2,"unemploymentGrade":4,"gdpGrade":1},{"name":"Netherlands","code":"NL","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-5.1,"yields":2.46,"debt":63.8,"unemployment":4.5,"gdp":783413245033.112,"isEuroZoneGrade":3,"isOriginalEuroZoneGrade":3,"deficitGrade":3,"yieldsGrade":4,"debtGrade":3,"unemploymentGrade":5,"gdpGrade":4},{"name":"Austria","code":"AT","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-4.4,"yields":2.92,"debt":72.5,"unemployment":3.9,"gdp":376162107600.0,"isEuroZoneGrade":4,"isOriginalEuroZoneGrade":4,"deficitGrade":3,"yieldsGrade":4,"debtGrade":2,"unemploymentGrade":5,"gdpGrade":3},{"name":"Poland","code":"PL","isEuroZone":"n","isOriginalEuroZone":"n","deficit":-7.8,"yields":5.71,"debt":56.0,"unemployment":9.4,"gdp":468585140961.857,"isEuroZoneGrade":4,"isOriginalEuroZoneGrade":4,"deficitGrade":2,"yieldsGrade":2,"debtGrade":3,"unemploymentGrade":2,"gdpGrade":4},{"name":"Portugal","code":"PT","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-9.8,"yields":11.72,"debt":106.3,"unemployment":12.5,"gdp":228538145695.364,"isEuroZoneGrade":4,"isOriginalEuroZoneGrade":4,"deficitGrade":1,"yieldsGrade":1,"debtGrade":1,"unemploymentGrade":2,"gdpGrade":3},{"name":"Romania","code":"RO","isEuroZone":"n","isOriginalEuroZone":"n","deficit":-6.9,"yields":7.48,"debt":34.3,"unemployment":7.5,"gdp":161623662680.931,"isEuroZoneGrade":4,"isOriginalEuroZoneGrade":4,"deficitGrade":2,"yieldsGrade":1,"debtGrade":5,"unemploymentGrade":3,"gdpGrade":2},{"name":"Slovenia","code":"SI","isEuroZone":"y","isOriginalEuroZone":"n","deficit":-5.8,"yields":5.16,"debt":44.4,"unemployment":8.0,"gdp":47762955727.1523,"isEuroZoneGrade":4,"isOriginalEuroZoneGrade":4,"deficitGrade":2,"yieldsGrade":2,"debtGrade":4,"unemploymentGrade":3,"gdpGrade":2},{"name":"Slovakia","code":"SK","isEuroZone":"y","isOriginalEuroZone":"n","deficit":-7.7,"yields":4.33,"debt":42.5,"unemployment":13.5,"gdp":0,"isEuroZoneGrade":4,"isOriginalEuroZoneGrade":4,"deficitGrade":2,"yieldsGrade":3,"debtGrade":4,"unemploymentGrade":1,"gdpGrade":1},{"name":"Finland","code":"FI","isEuroZone":"y","isOriginalEuroZone":"y","deficit":-2.5,"yields":2.51,"debt":45.3,"unemployment":7.8,"gdp":238801324503.311,"isEuroZoneGrade":5,"isOriginalEuroZoneGrade":5,"deficitGrade":4,"yieldsGrade":4,"debtGrade":3,"unemploymentGrade":3,"gdpGrade":3},{"name":"Sweden","code":"SE","isEuroZone":"n","isOriginalEuroZone":"n","deficit":0.2,"yields":1.9,"debt":36.8,"unemployment":7.2,"gdp":458003597858.405,"isEuroZoneGrade":5,"isOriginalEuroZoneGrade":5,"deficitGrade":5,"yieldsGrade":5,"debtGrade":4,"unemploymentGrade":4,"gdpGrade":4},{"name":"United Kingdom","code":"GB","isEuroZone":"n","isOriginalEuroZone":"n","deficit":-10.3,"yields":2.52,"debt":80.1,"unemployment":8.1,"gdp":2246079096749.22,"isEuroZoneGrade":5,"isOriginalEuroZoneGrade":5,"deficitGrade":1,"yieldsGrade":4,"debtGrade":2,"unemploymentGrade":3,"gdpGrade":5},{"name":"Norway","code":"NO","isEuroZone":"n","isOriginalEuroZone":"n","deficit":10.6,"yields":0.0,"debt":42.3,"unemployment":3.2,"gdp":414461767544.464,"isEuroZoneGrade":5,"isOriginalEuroZoneGrade":5,"deficitGrade":5,"yieldsGrade":5,"debtGrade":4,"unemploymentGrade":5,"gdpGrade":4}]

  for c in data
    Country.add new Country(c)

  window.counties = new Countries(el:$('#countries'))
  window.counties.refresh()

  Aggregate.load Country.filterBy('current')
  new Aggregates()
  new Categories(el:$('.categories'))

  gdp = [
    ['EU',16250328209821.20]
    ['E Asia & P',16219266890205.30]
    ['N America',16162456051801.20]
    ['USA',14582400000000.00]
    ['Euro',12174523489431.70]
    ['China',5878629246676.52]
    ['Japan',5497812568085.79]
    ['S&M America',5181851228628.24]
    ['Brazil',2087889553821.68]
    ['Arab World',1908954573177.62]
    ['India',1729010242153.78]
    ['Russian Fed',1479819314058.23]
    ['Korea Rep.',1014483158313.58]
    ['Switzerland',523772140978.64]
  ]

  (new Barchart(gdp)).draw()
  